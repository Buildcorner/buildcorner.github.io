THREE.OrbitControls=function(e,t,n){this.object=e,this.domElement=void 0!==t?t:document,this.localElement=void 0!==n?n:document,this.enabled=!0,this.target=new THREE.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var r=this,i=new THREE.Vector2,o=new THREE.Vector2,a=new THREE.Vector2,s=new THREE.Vector2,c=new THREE.Vector2,l=new THREE.Vector2,u=new THREE.Vector2,h=new THREE.Vector2,d=new THREE.Vector2,p=0,E=0,f=1,m=new THREE.Vector3,v=new THREE.Vector3,w={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},T=w.NONE,R={type:"change"};function y(){return 2*Math.PI/60/60*r.autoRotateSpeed}function g(){return Math.pow(.95,r.zoomSpeed)}function H(e){if(!1!==r.enabled){e.preventDefault();var t=r.domElement===document?r.domElement.body:r.domElement;if(T===w.ROTATE){if(!0===r.noRotate)return;o.set(e.clientX,e.clientY),a.subVectors(o,i),r.rotateLeft(2*Math.PI*a.x/t.clientWidth*r.rotateSpeed),r.rotateUp(2*Math.PI*a.y/t.clientHeight*r.rotateSpeed),i.copy(o)}else if(T===w.DOLLY){if(!0===r.noZoom)return;h.set(e.clientX,e.clientY),d.subVectors(h,u),d.y>0?r.dollyIn():r.dollyOut(),u.copy(h)}else if(T===w.PAN){if(!0===r.noPan)return;c.set(e.clientX,e.clientY),l.subVectors(c,s),r.pan(l),s.copy(c)}r.update()}}function M(){!1!==r.enabled&&(r.domElement.removeEventListener("mousemove",H,!1),r.domElement.removeEventListener("mouseup",M,!1),T=w.NONE)}function b(e){if(!1!==r.enabled&&!0!==r.noZoom){var t=0;e.wheelDelta?t=e.wheelDelta:e.detail&&(t=-e.detail),t>0?r.dollyOut():r.dollyIn()}}this.rotateLeft=function(e){void 0===e&&(e=y()),E-=e},this.rotateUp=function(e){void 0===e&&(e=y()),p-=e},this.panLeft=function(e){var t=new THREE.Vector3,n=this.object.matrix.elements;t.set(n[0],n[1],n[2]),t.multiplyScalar(-e),m.add(t)},this.panUp=function(e){var t=new THREE.Vector3,n=this.object.matrix.elements;t.set(n[4],n[5],n[6]),t.multiplyScalar(e),m.add(t)},this.pan=function(e){var t=r.domElement===document?r.domElement.body:r.domElement;if(void 0!==r.object.fov){var n=r.object.position.clone().sub(r.target).length();n*=Math.tan(r.object.fov/2*Math.PI/180),r.panLeft(2*e.x*n/t.clientHeight),r.panUp(2*e.y*n/t.clientHeight)}else void 0!==r.object.top?(r.panLeft(e.x*(r.object.right-r.object.left)/t.clientWidth),r.panUp(e.y*(r.object.top-r.object.bottom)/t.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=g()),f/=e},this.dollyOut=function(e){void 0===e&&(e=g()),f*=e},this.update=function(){var e=this.object.position,t=e.clone().sub(this.target),n=Math.atan2(t.x,t.z),r=Math.atan2(Math.sqrt(t.x*t.x+t.z*t.z),t.y);this.autoRotate&&this.rotateLeft(y()),n+=E,r+=p,r=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,r)),r=Math.max(1e-6,Math.min(Math.PI-1e-6,r));var i=t.length()*f;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(m),t.x=i*Math.sin(r)*Math.sin(n),t.y=i*Math.cos(r),t.z=i*Math.sin(r)*Math.cos(n),e.copy(this.target).add(t),this.object.lookAt(this.target),E=0,p=0,f=1,m.set(0,0,0),v.distanceTo(this.object.position)>0&&(this.dispatchEvent(R),v.copy(this.object.position))},this.domElement.addEventListener("contextmenu",function(e){e.preventDefault()},!1),this.localElement.addEventListener("mousedown",function(e){if(!1!==r.enabled){if(e.preventDefault(),0===e.button){if(!0===r.noRotate)return;T=w.ROTATE,i.set(e.clientX,e.clientY)}else if(1===e.button){if(!0===r.noZoom)return;T=w.DOLLY,u.set(e.clientX,e.clientY)}else if(2===e.button){if(!0===r.noPan)return;T=w.PAN,s.set(e.clientX,e.clientY)}r.domElement.addEventListener("mousemove",H,!1),r.domElement.addEventListener("mouseup",M,!1)}},!1),this.domElement.addEventListener("mousewheel",b,!1),this.domElement.addEventListener("DOMMouseScroll",b,!1),this.domElement.addEventListener("keydown",function(e){if(!1!==r.enabled&&!0!==r.noKeys&&!0!==r.noPan){var t=!1;switch(e.keyCode){case r.keys.UP:r.pan(new THREE.Vector2(0,r.keyPanSpeed)),t=!0;break;case r.keys.BOTTOM:r.pan(new THREE.Vector2(0,-r.keyPanSpeed)),t=!0;break;case r.keys.LEFT:r.pan(new THREE.Vector2(r.keyPanSpeed,0)),t=!0;break;case r.keys.RIGHT:r.pan(new THREE.Vector2(-r.keyPanSpeed,0)),t=!0}t&&r.update()}},!1),this.localElement.addEventListener("touchstart",function(e){if(!1!==r.enabled)switch(e.touches.length){case 1:if(!0===r.noRotate)return;T=w.TOUCH_ROTATE,i.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===r.noZoom)return;T=w.TOUCH_DOLLY;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);u.set(0,o);break;case 3:if(!0===r.noPan)return;T=w.TOUCH_PAN,s.set(e.touches[0].pageX,e.touches[0].pageY);break;default:T=w.NONE}},!1),this.domElement.addEventListener("touchend",function(){!1!==r.enabled&&(T=w.NONE)},!1),this.domElement.addEventListener("touchmove",function(e){if(!1!==r.enabled){e.preventDefault(),e.stopPropagation();var t=r.domElement===document?r.domElement.body:r.domElement;switch(e.touches.length){case 1:if(!0===r.noRotate)return;if(T!==w.TOUCH_ROTATE)return;o.set(e.touches[0].pageX,e.touches[0].pageY),a.subVectors(o,i),r.rotateLeft(2*Math.PI*a.x/t.clientWidth*r.rotateSpeed),r.rotateUp(2*Math.PI*a.y/t.clientHeight*r.rotateSpeed),i.copy(o);break;case 2:if(!0===r.noZoom)return;if(T!==w.TOUCH_DOLLY)return;var n=e.touches[0].pageX-e.touches[1].pageX,p=e.touches[0].pageY-e.touches[1].pageY,E=Math.sqrt(n*n+p*p);h.set(0,E),d.subVectors(h,u),d.y>0?r.dollyOut():r.dollyIn(),u.copy(h);break;case 3:if(!0===r.noPan)return;if(T!==w.TOUCH_PAN)return;c.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(c,s),r.pan(l),s.copy(c);break;default:T=w.NONE}}},!1)},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.RenderableObject=function(){this.id=0,this.object=null,this.z=0,this.renderOrder=0},THREE.RenderableFace=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.normalModel=new THREE.Vector3,this.vertexNormalsModel=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.vertexNormalsLength=0,this.color=new THREE.Color,this.material=null,this.uvs=[new THREE.Vector2,new THREE.Vector2,new THREE.Vector2],this.z=0,this.renderOrder=0},THREE.RenderableVertex=function(){this.position=new THREE.Vector3,this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(e){this.positionWorld.copy(e.positionWorld),this.positionScreen.copy(e.positionScreen)},THREE.RenderableLine=function(){this.id=0,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.vertexColors=[new THREE.Color,new THREE.Color],this.material=null,this.z=0,this.renderOrder=0},THREE.RenderableSprite=function(){this.id=0,this.object=null,this.x=0,this.y=0,this.z=0,this.rotation=0,this.scale=new THREE.Vector2,this.material=null,this.renderOrder=0},THREE.Projector=function(){var e,t,n,r,i,o,a,s,c,l,u,h=[],d=0,p=[],E=0,f=[],m=0,v=[],w=0,T=[],R=0,y={objects:[],lights:[],elements:[]},g=new THREE.Vector3,H=new THREE.Vector4,M=new THREE.Box3(new THREE.Vector3(-1,-1,-1),new THREE.Vector3(1,1,1)),b=new THREE.Box3,x=new Array(3),O=(new Array(4),new THREE.Matrix4),L=new THREE.Matrix4,S=new THREE.Matrix4,j=new THREE.Matrix3,V=new THREE.Frustum,P=new THREE.Vector4,z=new THREE.Vector4;this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(e,t){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")};var I=new function(){var e=[],t=[],r=null,o=null,s=new THREE.Matrix3;function c(e){var t=e.position,n=e.positionWorld,r=e.positionScreen;n.copy(t).applyMatrix4(u),r.copy(n).applyMatrix4(L);var i=1/r.w;r.x*=i,r.y*=i,r.z*=i,e.visible=r.x>=-1&&r.x<=1&&r.y>=-1&&r.y<=1&&r.z>=-1&&r.z<=1}function l(e,t,n){return!0===e.visible||!0===t.visible||!0===n.visible||(x[0]=e.positionScreen,x[1]=t.positionScreen,x[2]=n.positionScreen,M.intersectsBox(b.setFromPoints(x)))}function h(e,t,n){return(n.positionScreen.x-e.positionScreen.x)*(t.positionScreen.y-e.positionScreen.y)-(n.positionScreen.y-e.positionScreen.y)*(t.positionScreen.x-e.positionScreen.x)<0}return{setObject:function(n){o=(r=n).material,s.getNormalMatrix(r.matrixWorld),e.length=0,t.length=0},projectVertex:c,checkTriangleVisibility:l,checkBackfaceCulling:h,pushVertex:function(e,t,r){(n=N()).position.set(e,t,r),c(n)},pushNormal:function(t,n,r){e.push(t,n,r)},pushUv:function(e,n){t.push(e,n)},pushLine:function(e,t){var n=p[e],i=p[t];(a=W()).id=r.id,a.v1.copy(n),a.v2.copy(i),a.z=(n.positionScreen.z+i.positionScreen.z)/2,a.renderOrder=r.renderOrder,a.material=r.material,y.elements.push(a)},pushTriangle:function(n,a,c){var u=p[n],d=p[a],E=p[c];if(!1!==l(u,d,E)&&(o.side===THREE.DoubleSide||!0===h(u,d,E))){(i=C()).id=r.id,i.v1.copy(u),i.v2.copy(d),i.v3.copy(E),i.z=(u.positionScreen.z+d.positionScreen.z+E.positionScreen.z)/3,i.renderOrder=r.renderOrder,i.normalModel.fromArray(e,3*n),i.normalModel.applyMatrix3(s).normalize();for(var f=0;f<3;f++){var m=i.vertexNormalsModel[f];m.fromArray(e,3*arguments[f]),m.applyMatrix3(s).normalize(),i.uvs[f].fromArray(t,2*arguments[f])}i.vertexNormalsLength=3,i.material=r.material,y.elements.push(i)}}}};function N(){if(r===E){var e=new THREE.RenderableVertex;return p.push(e),E++,r++,e}return p[r++]}function C(){if(o===m){var e=new THREE.RenderableFace;return f.push(e),m++,o++,e}return f[o++]}function W(){if(s===w){var e=new THREE.RenderableLine;return v.push(e),w++,s++,e}return v[s++]}function k(){if(l===R){var e=new THREE.RenderableSprite;return T.push(e),R++,l++,e}return T[l++]}function D(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id!==t.id?e.id-t.id:0}function A(e,t){var n=0,r=1,i=e.z+e.w,o=t.z+t.w,a=-e.z+e.w,s=-t.z+t.w;return i>=0&&o>=0&&a>=0&&s>=0||!(i<0&&o<0||a<0&&s<0)&&(i<0?n=Math.max(n,i/(i-o)):o<0&&(r=Math.min(r,i/(i-o))),a<0?n=Math.max(n,a/(a-s)):s<0&&(r=Math.min(r,a/(a-s))),!(r<n)&&(e.lerp(t,n),t.lerp(e,1-r),!0))}this.projectScene=function(n,E,f,m){o=0,s=0,l=0,y.elements.length=0,!0===n.autoUpdate&&n.updateMatrixWorld(),null===E.parent&&E.updateMatrixWorld(),O.copy(E.matrixWorldInverse.getInverse(E.matrixWorld)),L.multiplyMatrices(E.projectionMatrix,O),V.setFromMatrix(L),t=0,y.objects.length=0,y.lights.length=0,n.traverseVisible(function(n){if(n instanceof THREE.Light)y.lights.push(n);else if(n instanceof THREE.Mesh||n instanceof THREE.Line||n instanceof THREE.Sprite){if(!1===n.material.visible)return;!1!==n.frustumCulled&&!0!==V.intersectsObject(n)||((e=function(){if(t===d){var e=new THREE.RenderableObject;return h.push(e),d++,t++,e}return h[t++]}()).id=n.id,e.object=n,g.setFromMatrixPosition(n.matrixWorld),g.applyProjection(L),e.z=g.z,e.renderOrder=n.renderOrder,y.objects.push(e))}}),!0===f&&y.objects.sort(D);for(var v=0,w=y.objects.length;v<w;v++){var T=y.objects[v].object,R=T.geometry;if(I.setObject(T),u=T.matrixWorld,r=0,T instanceof THREE.Mesh){if(R instanceof THREE.BufferGeometry){var M=R.attributes,b=R.groups;if(void 0===M.position)continue;for(var x=0,U=(ye=M.position.array).length;x<U;x+=3)I.pushVertex(ye[x],ye[x+1],ye[x+2]);if(void 0!==M.normal){var F=M.normal.array;for(x=0,U=F.length;x<U;x+=3)I.pushNormal(F[x],F[x+1],F[x+2])}if(void 0!==M.uv){var B=M.uv.array;for(x=0,U=B.length;x<U;x+=2)I.pushUv(B[x],B[x+1])}if(null!==R.index){var Y=R.index.array;if(b.length>0)for(v=0;v<b.length;v++){var q=b[v];for(x=q.start,U=q.start+q.count;x<U;x+=3)I.pushTriangle(Y[x],Y[x+1],Y[x+2])}else for(x=0,U=Y.length;x<U;x+=3)I.pushTriangle(Y[x],Y[x+1],Y[x+2])}else for(x=0,U=ye.length/3;x<U;x+=3)I.pushTriangle(x,x+1,x+2)}else if(R instanceof THREE.Geometry){var X=R.vertices,_=R.faces,G=R.faceVertexUvs[0];j.getNormalMatrix(u);for(var Z=T.material,Q=Z instanceof THREE.MultiMaterial,K=!0===Q?T.material:null,J=0,$=X.length;J<$;J++){var ee=X[J];if(g.copy(ee),!0===Z.morphTargets)for(var te=R.morphTargets,ne=T.morphTargetInfluences,re=0,ie=te.length;re<ie;re++){var oe=ne[re];if(0!==oe){var ae=te[re].vertices[J];g.x+=(ae.x-ee.x)*oe,g.y+=(ae.y-ee.y)*oe,g.z+=(ae.z-ee.z)*oe}}I.pushVertex(g.x,g.y,g.z)}for(var se=0,ce=_.length;se<ce;se++){var le=_[se];if(void 0!==(Z=!0===Q?K.materials[le.materialIndex]:T.material)){var ue=Z.side,he=p[le.a],de=p[le.b],pe=p[le.c];if(!1!==I.checkTriangleVisibility(he,de,pe)){var Ee=I.checkBackfaceCulling(he,de,pe);if(ue!==THREE.DoubleSide){if(ue===THREE.FrontSide&&!1===Ee)continue;if(ue===THREE.BackSide&&!0===Ee)continue}(i=C()).id=T.id,i.v1.copy(he),i.v2.copy(de),i.v3.copy(pe),i.normalModel.copy(le.normal),!1!==Ee||ue!==THREE.BackSide&&ue!==THREE.DoubleSide||i.normalModel.negate(),i.normalModel.applyMatrix3(j).normalize();for(var fe=le.vertexNormals,me=0,ve=Math.min(fe.length,3);me<ve;me++){var we=i.vertexNormalsModel[me];we.copy(fe[me]),!1!==Ee||ue!==THREE.BackSide&&ue!==THREE.DoubleSide||we.negate(),we.applyMatrix3(j).normalize()}i.vertexNormalsLength=fe.length;var Te=G[se];if(void 0!==Te)for(var Re=0;Re<3;Re++)i.uvs[Re].copy(Te[Re]);i.color=le.color,i.material=Z,i.z=(he.positionScreen.z+de.positionScreen.z+pe.positionScreen.z)/3,i.renderOrder=T.renderOrder,y.elements.push(i)}}}}}else if(T instanceof THREE.Line){if(R instanceof THREE.BufferGeometry){if(void 0!==(M=R.attributes).position){var ye;for(x=0,U=(ye=M.position.array).length;x<U;x+=3)I.pushVertex(ye[x],ye[x+1],ye[x+2]);if(null!==R.index)for(x=0,U=(Y=R.index.array).length;x<U;x+=2)I.pushLine(Y[x],Y[x+1]);else{var ge=T instanceof THREE.LineSegments?2:1;for(x=0,U=ye.length/3-1;x<U;x+=ge)I.pushLine(x,x+1)}}}else if(R instanceof THREE.Geometry){if(S.multiplyMatrices(L,u),0===(X=T.geometry.vertices).length)continue;(he=N()).positionScreen.copy(X[0]).applyMatrix4(S);for(ge=T instanceof THREE.LineSegments?2:1,J=1,$=X.length;J<$;J++)(he=N()).positionScreen.copy(X[J]).applyMatrix4(S),(J+1)%ge>0||(de=p[r-2],P.copy(he.positionScreen),z.copy(de.positionScreen),!0===A(P,z)&&(P.multiplyScalar(1/P.w),z.multiplyScalar(1/z.w),(a=W()).id=T.id,a.v1.positionScreen.copy(P),a.v2.positionScreen.copy(z),a.z=Math.max(P.z,z.z),a.renderOrder=T.renderOrder,a.material=T.material,T.material.vertexColors===THREE.VertexColors&&(a.vertexColors[0].copy(T.geometry.colors[J]),a.vertexColors[1].copy(T.geometry.colors[J-1])),y.elements.push(a)))}}else if(T instanceof THREE.Sprite){H.set(u.elements[12],u.elements[13],u.elements[14],1),H.applyMatrix4(L);var He=1/H.w;H.z*=He,H.z>=-1&&H.z<=1&&((c=k()).id=T.id,c.x=H.x*He,c.y=H.y*He,c.z=H.z,c.renderOrder=T.renderOrder,c.object=T,c.rotation=T.rotation,c.scale.x=T.scale.x*Math.abs(c.x-(H.x+E.projectionMatrix.elements[0])/(H.w+E.projectionMatrix.elements[12])),c.scale.y=T.scale.y*Math.abs(c.y-(H.y+E.projectionMatrix.elements[5])/(H.w+E.projectionMatrix.elements[13])),c.material=T.material,y.elements.push(c))}}return!0===m&&y.elements.sort(D),y}},function(e){function t(e,t){return e.distance-t.distance}function n(e,t,r,i){if(!1!==e.visible&&(e.raycast(t,r),!0===i))for(var o=e.children,a=0,s=o.length;a<s;a++)n(o[a],t,r,!0)}e.Raycaster=function(t,n,r,i){this.ray=new e.Ray(t,n),this.near=r||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})},e.Raycaster.prototype={constructor:e.Raycaster,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(t,n){n instanceof e.PerspectiveCamera?(this.ray.origin.setFromMatrixPosition(n.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(n).sub(this.ray.origin).normalize()):n instanceof e.OrthographicCamera?(this.ray.origin.set(t.x,t.y,-1).unproject(n),this.ray.direction.set(0,0,-1).transformDirection(n.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,r){var i=[];return n(e,this,i,r),i.sort(t),i},intersectObjects:function(e,r){var i=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var o=0,a=e.length;o<a;o++)n(e[o],this,i,r);return i.sort(t),i}}}(THREE),function(){if("performance"in window==!1&&(window.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now"in window.performance==!1){var e=window.performance.timing&&window.performance.timing.navigationStart?window.performance.timing.navigationStart:Date.now();window.performance.now=function(){return Date.now()-e}}}();var TWEEN=TWEEN||function(){var e=[];return{getAll:function(){return e},removeAll:function(){e=[]},add:function(t){e.push(t)},remove:function(t){var n=e.indexOf(t);-1!==n&&e.splice(n,1)},update:function(t){if(0===e.length)return!1;var n=0;for(t=void 0!==t?t:window.performance.now();n<e.length;)e[n].update(t)?n++:e.splice(n,1);return!0}}}();TWEEN.Tween=function(e){var t=e,n={},r={},i={},o=1e3,a=0,s=!1,c=!1,l=!1,u=0,h=null,d=TWEEN.Easing.Linear.None,p=TWEEN.Interpolation.Linear,E=[],f=null,m=!1,v=null,w=null,T=null;for(var R in e)n[R]=parseFloat(e[R],10);this.to=function(e,t){return void 0!==t&&(o=t),r=e,this},this.start=function(e){TWEEN.add(this),c=!0,m=!1,h=void 0!==e?e:window.performance.now(),h+=u;for(var o in r){if(r[o]instanceof Array){if(0===r[o].length)continue;r[o]=[t[o]].concat(r[o])}n[o]=t[o],n[o]instanceof Array==!1&&(n[o]*=1),i[o]=n[o]||0}return this},this.stop=function(){return c?(TWEEN.remove(this),c=!1,null!==T&&T.call(t),this.stopChainedTweens(),this):this},this.stopChainedTweens=function(){for(var e=0,t=E.length;e<t;e++)E[e].stop()},this.delay=function(e){return u=e,this},this.repeat=function(e){return a=e,this},this.yoyo=function(e){return s=e,this},this.easing=function(e){return d=e,this},this.interpolation=function(e){return p=e,this},this.chain=function(){return E=arguments,this},this.onStart=function(e){return f=e,this},this.onUpdate=function(e){return v=e,this},this.onComplete=function(e){return w=e,this},this.onStop=function(e){return T=e,this},this.update=function(e){var c;if(e<h)return!0;!1===m&&(null!==f&&f.call(t),m=!0);var T=(e-h)/o,R=d(T=T>1?1:T);for(c in r){var y=n[c]||0,g=r[c];g instanceof Array?t[c]=p(g,R):("string"==typeof g&&(g=y+parseFloat(g,10)),"number"==typeof g&&(t[c]=y+(g-y)*R))}if(null!==v&&v.call(t,R),1===T){if(a>0){isFinite(a)&&a--;for(c in i){if("string"==typeof r[c]&&(i[c]=i[c]+parseFloat(r[c],10)),s){var H=i[c];i[c]=r[c],r[c]=H}n[c]=i[c]}return s&&(l=!l),h=e+u,!0}null!==w&&w.call(t);for(var M=0,b=E.length;M<b;M++)E[M].start(e);return!1}return!0}},TWEEN.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},Out:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},InOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(!n||n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){return(e*=2)<1?e*e*(3.5949095*e-2.5949095)*.5:.5*((e-=2)*e*(3.5949095*e+2.5949095)+2)}},Bounce:{In:function(e){return 1-TWEEN.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*TWEEN.Easing.Bounce.In(2*e):.5*TWEEN.Easing.Bounce.Out(2*e-1)+.5}}},TWEEN.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=TWEEN.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],r):t>1?o(e[n],e[n-1],n-r):o(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){var n,r=0,i=e.length-1,o=Math.pow,a=TWEEN.Interpolation.Utils.Bernstein;for(n=0;n<=i;n++)r+=o(1-t,i-n)*o(t,n)*e[n]*a(i,n);return r},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),o=TWEEN.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),o(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(o(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):o(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=TWEEN.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:function(){var e=[1];return function(t){var n,r=1;if(e[t])return e[t];for(n=t;n>1;n--)r*=n;return e[t]=r,r}}(),CatmullRom:function(e,t,n,r,i){var o=.5*(n-e),a=.5*(r-t),s=i*i;return(2*t-2*n+o+a)*(i*s)+(-3*t+3*n-2*o-a)*s+o*i+t}}},function(e){"function"==typeof define&&define.amd?define([],function(){return TWEEN}):"object"==typeof exports?module.exports=TWEEN:e.TWEEN=TWEEN}(this);var container,scene,camera,renderer,controls,stats,cameraPosition,cubeCamera,smaterial,material,plight,projector,clock=new THREE.Clock,count=0,fov=60,ac_mesh=new THREE.Mesh,rad90=.001*Math.PI,mouse={x:0,y:0};function init(){scene=new THREE.Scene;var e=new THREE.JSONLoader;container=document.createElement("div"),document.body.appendChild(container),(camera=new THREE.PerspectiveCamera(fov,window.innerWidth/window.innerHeight,1,1e4)).position.set(27,104,-499),camera.lookAt(new THREE.Vector3(1000,28000,10000)),(renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0})).setPixelRatio(window.devicePixelRatio),renderer.setSize(window.innerWidth,window.innerHeight),container.appendChild(renderer.domElement);var t=(new THREE.TextureLoader).load("js/machine/8k_optimised.jpg");(controls=new THREE.OrbitControls(camera)).target=new THREE.Vector3(0,0,0),controls.maxDistance=100,controls.minDistance=0,controls.addEventListener("change",light_update),e.setTexturePath("js/wheel/"),e.load("js/machine/machine2.js",function(e){var n=new THREE.MeshStandardMaterial;n.map=t,n.metalness=.4,n.roughness=.8,e.faceVertexUvs[1]=e.faceVertexUvs[0],ac_mesh=new THREE.Mesh(e,n),scene.add(ac_mesh)}),window.addEventListener("resize",resize,!1),(plight=new THREE.DirectionalLight(16777215,1)).castShadow=!0,scene.add(plight),ambientLight=new THREE.AmbientLight(16777215,.5),scene.add(ambientLight)}function light_update(){plight.position.copy(camera.position)}function addLights(){dirLight=new THREE.DirectionalLight(4210752,.5),dirLight.position.set(0,100,20),dirLight.castShadow=!0,dirLight.shadowCameraNear=8,dirLight.shadowCameraFar=300,dirLight.shadow.camera.left=-100,dirLight.shadow.camera.right=0,dirLight.shadow.camera.top=100,dirLight.shadow.camera.bottom=-0,dirLight.shadowMapWidth=2048,dirLight.shadowMapHeight=2048,dirLight.shadowBias=-.001,dirLight.name="Directional Light";new THREE.CameraHelper(dirLight.shadow.camera)}function resize(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}function update(e){resize(),camera.updateProjectionMatrix(),controls.update(e)}function render(e){renderer.render(scene,camera)}function animate(e){requestAnimationFrame(animate),TWEEN.update(),update(clock.getDelta()),render(clock.getDelta())}function fullscreen(){container.requestFullscreen?container.requestFullscreen():container.msRequestFullscreen?container.msRequestFullscreen():container.mozRequestFullScreen?container.mozRequestFullScreen():container.webkitRequestFullscreen&&container.webkitRequestFullscreen()}init(),animate(),addLights();